{"mappings":"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","sources":["<anon>","script.js"],"sourcesContent":["// --- LANGUAGE MANAGEMENT ---\nlet currentLanguage = 'id'; // Default to Indonesian\n/**\r\n * Apply translations to elements with data-translate attributes\r\n */ function applyTranslations() {\n    const elements = document.querySelectorAll('[data-translate]');\n    elements.forEach((element)=>{\n        const key = element.getAttribute('data-translate');\n        if (translations[currentLanguage] && translations[currentLanguage][key]) element.textContent = translations[currentLanguage][key];\n    });\n}\n/**\r\n * Detect user's country and set language accordingly\r\n */ async function detectUserLanguage() {\n    try {\n        const response = await fetch('https://ipapi.co/json/');\n        const data = await response.json();\n        if (data.country === 'ID') currentLanguage = 'id';\n        else currentLanguage = 'en';\n    } catch (error) {\n        console.warn('Failed to detect user location, defaulting to Indonesian:', error);\n        currentLanguage = 'id'; // Fallback to Indonesian\n    }\n}\n// --- DATA AWAL ---\nconst initialData = [\n    {\n        modul: 'A',\n        kategori: 'ELEKTRONIK',\n        komponen: 'Mikrokontroler (e.g., Arduino Uno)',\n        jumlah: 1,\n        satuan: 'unit',\n        harga: 150000,\n        keterangan: 'Otak utama proyek',\n        isHeader: false,\n        image: ''\n    },\n    {\n        modul: 'A',\n        kategori: 'ELEKTRONIK',\n        komponen: 'Sensor Jarak (e.g., HC-SR04)',\n        jumlah: 2,\n        satuan: 'unit',\n        harga: 25000,\n        keterangan: 'Untuk deteksi halangan',\n        isHeader: false,\n        image: ''\n    },\n    {\n        modul: 'B',\n        kategori: 'MEKANIK',\n        komponen: 'Roda Karet',\n        jumlah: 4,\n        satuan: 'pcs',\n        harga: 15000,\n        keterangan: 'Ukuran 65mm',\n        isHeader: false,\n        image: ''\n    },\n    {\n        modul: 'B',\n        kategori: 'MEKANIK',\n        komponen: 'Motor DC + Gearbox',\n        jumlah: 4,\n        satuan: 'unit',\n        harga: 45000,\n        keterangan: 'Penggerak roda',\n        isHeader: false,\n        image: ''\n    },\n    {\n        modul: 'C',\n        kategori: 'DAYA',\n        komponen: 'Baterai Li-Ion 18650',\n        jumlah: 2,\n        satuan: 'unit',\n        harga: 50000,\n        keterangan: 'Kapasitas 3000mAh',\n        isHeader: false,\n        image: ''\n    },\n    {\n        modul: 'C',\n        kategori: 'DAYA',\n        komponen: 'Modul Charger TP4056',\n        jumlah: 1,\n        satuan: 'unit',\n        harga: 10000,\n        keterangan: 'Untuk mengisi daya baterai',\n        isHeader: false,\n        image: ''\n    }\n];\n// --- REFERENSI DOM ---\nconst rabTbody = document.getElementById('rab-tbody');\nconst rabTitle = document.getElementById('rab-title');\nconst addRowBtn = document.getElementById('add-row-btn');\nconst undoBtn = document.getElementById('undo-btn');\nconst redoBtn = document.getElementById('redo-btn');\n// Dropdown elements\nconst actionDropdownToggle = document.getElementById('action-dropdown-toggle');\nconst actionDropdownMenu = document.getElementById('action-dropdown-menu');\nconst importJsonBtn = document.getElementById('import-json-btn');\nconst exportJsonBtn = document.getElementById('export-json-btn');\nconst printPdfBtn = document.getElementById('print-pdf-btn');\n// --- RIWAYAT UNDO/REDO ---\nlet history = [];\nlet historyIndex = -1;\n// --- UTILITY FUNCTIONS ---\nfunction formatRupiah(angka) {\n    return new Intl.NumberFormat('id-ID', {\n        maximumFractionDigits: 0\n    }).format(angka);\n}\n/**\r\n * Membuat elemen baris (Row) tabel\r\n */ function createRow(data) {\n    if (data.isHeader) {\n        const headerRow = document.createElement('tr');\n        headerRow.className = 'modul-header';\n        // Header Modul dibuat editable, colspan 9 untuk mencakup kolom Gambar dan Aksi\n        headerRow.innerHTML = `\n            <td colspan=\"10\" contenteditable=\"true\">${data.modul} - ${data.kategori}</td>\n            <td class=\"action-column\">\n                <button class=\"add-component-header-btn\" data-modul=\"${data.modul}\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\n                </button>\n            </td>\n        `;\n        // Attach event listener for the new button\n        const addComponentButton = headerRow.querySelector('.add-component-header-btn');\n        if (addComponentButton) addComponentButton.addEventListener('click', (e)=>{\n            const module = e.currentTarget.dataset.modul;\n            addComponentToModule(module);\n        });\n        return headerRow;\n    }\n    const row = document.createElement('tr');\n    row.className = `modul-${data.modul.toLowerCase()}`;\n    row.dataset.modul = data.modul;\n    // Memasukkan input dan teks print-only, serta class rata tengah\n    row.innerHTML = `\n        <td data-label=\"Modul\" class=\"center-print editable-cell\" contenteditable=\"true\">${data.modul}</td>\n        <td data-label=\"Kategori\" class=\"editable-cell\" contenteditable=\"true\">${data.kategori}</td>\n        <td data-label=\"Komponen\" class=\"editable-cell\" contenteditable=\"true\">${data.komponen}</td>\n        \n        <td data-label=\"Jumlah\" class=\"center-print\">\n            <input type=\"number\" min=\"0\" value=\"${data.jumlah}\" class=\"qty-input\">\n            <span class=\"print-text\">${data.jumlah}</span>\n        </td>\n        \n        <td data-label=\"Satuan\" class=\"editable-cell\" contenteditable=\"true\">${data.satuan}</td>\n        \n        <td data-label=\"Harga Satuan (IDR)\">\n            <input type=\"number\" min=\"0\" value=\"${data.harga}\" class=\"price-input\">\n            <span class=\"print-text\">${formatRupiah(data.harga)}</span>\n        </td>\n        \n        <td data-label=\"Subtotal (IDR)\" class=\"currency subtotal\"></td>\n        <td data-label=\"Keterangan\" class=\"note editable-cell\" contenteditable=\"true\">${data.keterangan}</td>\n        \n        <td data-label=\"Gambar\" class=\"image-column\">\n            <div class=\"image-preview-container\">\n                <img src=\"${data.image || 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='}\" class=\"image-preview\" alt=\"Gambar Komponen\" ${data.image ? '' : 'style=\"display: none;\"'}>\n                <input type=\"file\" accept=\"image/*\" class=\"image-input\" style=\"display: none;\">\n                <div class=\"image-controls\">\n                    <button class=\"btn-image-upload\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-image\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle><polyline points=\"21 15 16 10 5 21\"></polyline></svg>\n                    </button>\n                    <button class=\"btn-image-clear\" ${data.image ? '' : 'style=\"display: none;\"'}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n                    </button>\n                </div>\n            </div>\n        </td>\n        \n        <td data-label=\"Aksi\" class=\"action-column\"><button class=\"delete-btn\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trash-2\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line></svg>\n        </button></td> \n    `;\n    const qtyInput = row.querySelector('.qty-input');\n    const priceInput = row.querySelector('.price-input');\n    const deleteButton = row.querySelector('.delete-btn');\n    const editableCells = row.querySelectorAll('.editable-cell');\n    // Image handling elements\n    const imageInput = row.querySelector('.image-input');\n    const imagePreview = row.querySelector('.image-preview');\n    const btnImageUpload = row.querySelector('.btn-image-upload');\n    const btnImageClear = row.querySelector('.btn-image-clear');\n    // Ambil elemen print-text untuk diupdate saat input berubah\n    const qtyPrintText = row.querySelector('.print-text:first-child');\n    const pricePrintText = row.querySelector('.print-text:last-child');\n    qtyInput.addEventListener('input', ()=>{\n        calculateTotal();\n        qtyPrintText.textContent = qtyInput.value;\n    });\n    priceInput.addEventListener('input', ()=>{\n        calculateTotal();\n        pricePrintText.textContent = formatRupiah(priceInput.value);\n    });\n    // Simpan state saat pengguna selesai mengedit (on blur)\n    qtyInput.addEventListener('blur', ()=>saveState());\n    priceInput.addEventListener('blur', ()=>saveState());\n    deleteButton.addEventListener('click', (e)=>deleteRow(e.target));\n    editableCells.forEach((cell)=>{\n        cell.addEventListener('input', calculateTotal);\n        // Simpan state saat pengguna selesai mengedit sel\n        cell.addEventListener('blur', ()=>saveState());\n    });\n    // --- Image Handling Event Listeners ---\n    btnImageUpload.addEventListener('click', ()=>imageInput.click());\n    imageInput.addEventListener('change', (e)=>{\n        const file = e.target.files[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = (event)=>{\n                imagePreview.src = event.target.result;\n                imagePreview.style.display = 'block';\n                btnImageClear.style.display = 'inline-block';\n                // Update the data model associated with this row\n                const currentData = extractTableData();\n                const rowIndex = Array.from(rabTbody.children).indexOf(row);\n                // Adjust rowIndex for header rows if present\n                let actualRowIndex = -1;\n                let dataIndex = 0;\n                for(let i = 0; i < rabTbody.children.length; i++){\n                    if (rabTbody.children[i].classList.contains('modul-header')) continue;\n                    if (rabTbody.children[i] === row) {\n                        actualRowIndex = dataIndex;\n                        break;\n                    }\n                    dataIndex++;\n                }\n                if (actualRowIndex !== -1 && currentData[actualRowIndex]) {\n                    currentData[actualRowIndex].image = event.target.result;\n                    saveState(); // Save state after image update\n                }\n            };\n            reader.readAsDataURL(file);\n        }\n    });\n    btnImageClear.addEventListener('click', ()=>{\n        imagePreview.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='; // Transparent GIF\n        imagePreview.style.display = 'none';\n        btnImageClear.style.display = 'none';\n        // Update the data model associated with this row\n        const currentData = extractTableData();\n        const rowIndex = Array.from(rabTbody.children).indexOf(row);\n        let actualRowIndex = -1;\n        let dataIndex = 0;\n        for(let i = 0; i < rabTbody.children.length; i++){\n            if (rabTbody.children[i].classList.contains('modul-header')) continue;\n            if (rabTbody.children[i] === row) {\n                actualRowIndex = dataIndex;\n                break;\n            }\n            dataIndex++;\n        }\n        if (actualRowIndex !== -1 && currentData[actualRowIndex]) {\n            currentData[actualRowIndex].image = '';\n            saveState(); // Save state after image clear\n        }\n    });\n    return row;\n}\n/**\r\n * Memasukkan baris Total Keseluruhan ke akhir tbody.\r\n */ function insertTotalRow() {\n    // Pastikan elemen totalRow sebelumnya tidak ada (untuk menghindari duplikasi saat render ulang)\n    let existingTotalRow = document.querySelector('.total-row-dynamic');\n    if (existingTotalRow) existingTotalRow.remove();\n    const totalRow = document.createElement('tr');\n    totalRow.className = 'total-row total-row-dynamic'; // Tambahkan class dynamic untuk identifikasi\n    totalRow.innerHTML = `\n        <td colspan=\"6\" style=\"text-align: center;\">TOTAL KESELURUHAN (ESTIMASI)</td>\n        <td class=\"currency\" id=\"total-harga\">0</td>\n        <td colspan=\"3\" class=\"action-column\"></td> \n        `;\n    rabTbody.appendChild(totalRow);\n}\n// --- FUNGSI UNDO/REDO ---\n/**\r\n * Memperbarui status tombol Urungkan dan Ulangi (aktif/nonaktif).\r\n */ function updateUndoRedoButtons() {\n    undoBtn.disabled = historyIndex <= 0;\n    redoBtn.disabled = historyIndex >= history.length - 1;\n}\n/**\r\n * Menyimpan snapshot dari data tabel saat ini ke dalam riwayat.\r\n * Ini akan menghapus riwayat \"redo\" jika ada perubahan baru.\r\n */ function saveState() {\n    // Ambil data saat ini\n    const currentState = extractTableData();\n    // Hapus riwayat masa depan jika kita membuat perubahan baru setelah meng-undo\n    if (historyIndex < history.length - 1) history = history.slice(0, historyIndex + 1);\n    // Tambahkan state baru ke riwayat\n    history.push(currentState);\n    historyIndex++;\n    // Perbarui status tombol\n    updateUndoRedoButtons();\n}\n/**\r\n * Mengembalikan state tabel ke posisi sebelumnya dalam riwayat.\r\n */ function undo() {\n    if (historyIndex > 0) {\n        historyIndex--;\n        // Render ulang tabel dengan state dari riwayat tanpa menyimpan state baru\n        renderTable(history[historyIndex], false);\n        updateUndoRedoButtons();\n    }\n}\n/**\r\n * Mengembalikan state tabel ke posisi berikutnya dalam riwayat.\r\n */ function redo() {\n    if (historyIndex < history.length - 1) {\n        historyIndex++;\n        // Render ulang tabel dengan state dari riwayat tanpa menyimpan state baru\n        renderTable(history[historyIndex], false);\n        updateUndoRedoButtons();\n    }\n}\n/**\r\n * Merender data ke tabel dengan header modul.\r\n * @param {Array} data - Data yang akan dirender.\r\n * @param {boolean} shouldSaveState - Apakah akan menyimpan state ini ke riwayat. Default true.\r\n */ function renderTable(data, shouldSaveState = true) {\n    rabTbody.innerHTML = '';\n    let currentModul = null;\n    data.sort((a, b)=>a.modul.localeCompare(b.modul));\n    data.forEach((item)=>{\n        const kategori = item.kategori;\n        if (item.modul !== currentModul) {\n            const headerData = {\n                modul: item.modul,\n                kategori: kategori,\n                isHeader: true\n            };\n            rabTbody.appendChild(createRow(headerData));\n            currentModul = item.modul;\n        }\n        rabTbody.appendChild(createRow(item));\n    });\n    insertTotalRow();\n    calculateTotal();\n    // Simpan state setelah rendering jika diperlukan\n    if (shouldSaveState) saveState();\n}\n/**\r\n * Menghitung dan memperbarui total biaya RAB.\r\n */ function calculateTotal(shouldSaveState = false) {\n    let total = 0;\n    const rows = rabTbody.querySelectorAll('tr:not(.modul-header):not(.total-row-dynamic)');\n    rows.forEach((row)=>{\n        const qtyInput = row.querySelector('.qty-input');\n        const priceInput = row.querySelector('.price-input');\n        const subtotalElement = row.querySelector('.subtotal');\n        const qty = parseInt(qtyInput ? qtyInput.value : 0) || 0;\n        const price = parseInt(priceInput ? priceInput.value : 0) || 0;\n        const subtotal = qty * price;\n        if (subtotalElement) {\n            subtotalElement.textContent = formatRupiah(subtotal);\n            total += subtotal;\n        }\n    });\n    const totalHargaElement = document.getElementById('total-harga');\n    const totalEstimasiElement = document.getElementById('total-estimasi');\n    if (totalHargaElement) totalHargaElement.textContent = formatRupiah(total);\n    if (totalEstimasiElement) totalEstimasiElement.textContent = 'Rp ' + formatRupiah(total);\n    // Hanya simpan state jika diminta secara eksplisit\n    if (shouldSaveState) saveState();\n}\n/**\r\n * Menambahkan komponen baru di bawah header modul tertentu.\r\n */ function addComponentToModule(module) {\n    const newComponent = {\n        modul: module,\n        kategori: 'KATEGORI BARU',\n        komponen: 'Komponen Baru',\n        jumlah: 1,\n        satuan: 'pcs',\n        harga: 10000,\n        keterangan: 'Masukkan keterangan di sini',\n        isHeader: false,\n        image: '' // Tambah properti gambar\n    };\n    let currentData = extractTableData();\n    // Cari indeks baris terakhir dari modul yang sama\n    let insertIndex = currentData.length; // Default: tambahkan di akhir\n    // Find the last item of the given module to insert after it\n    for(let i = currentData.length - 1; i >= 0; i--)if (currentData[i].modul === module) {\n        insertIndex = i + 1;\n        break;\n    }\n    currentData.splice(insertIndex, 0, newComponent);\n    renderTable(currentData);\n}\n/**\r\n * Menambahkan baris komponen baru ke tabel.\r\n */ function addNewRow() {\n    const newComponent = {\n        modul: 'E',\n        kategori: 'KOMPONEN LAIN',\n        komponen: 'Komponen Baru',\n        jumlah: 1,\n        satuan: 'pcs',\n        harga: 10000,\n        keterangan: 'Masukkan keterangan di sini',\n        isHeader: false,\n        image: '' // Tambah properti gambar\n    };\n    const currentData = extractTableData();\n    currentData.push(newComponent);\n    renderTable(currentData);\n}\n/**\r\n * Menghapus baris komponen dari tabel.\r\n */ function deleteRow(button) {\n    const row = button.closest('tr');\n    const componentName = row.children[2].textContent;\n    if (confirm(`Yakin ingin menghapus komponen: ${componentName}?`)) {\n        row.remove();\n        calculateTotal();\n        saveState(); // Simpan state setelah menghapus\n    }\n}\n// --- EXPORT/IMPORT FUNCTIONALITY ---\nfunction extractTableData() {\n    const data = [];\n    // Seleksi hanya baris komponen, abaikan header dan baris total\n    const rows = rabTbody.querySelectorAll('tr:not(.modul-header):not(.total-row-dynamic)');\n    rows.forEach((row)=>{\n        const imagePreview = row.querySelector('.image-preview');\n        const imageData = imagePreview && imagePreview.src !== 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=' ? imagePreview.src : '';\n        const item = {\n            modul: row.children[0].textContent.trim(),\n            kategori: row.children[1].textContent.trim(),\n            komponen: row.children[2].textContent.trim(),\n            jumlah: parseInt(row.querySelector('.qty-input').value) || 0,\n            satuan: row.children[4].textContent.trim(),\n            harga: parseInt(row.querySelector('.price-input').value) || 0,\n            keterangan: row.children[7].textContent.trim(),\n            image: imageData,\n            isHeader: false\n        };\n        data.push(item);\n    });\n    return data;\n}\nfunction exportData() {\n    const projectData = {\n        title: rabTitle.textContent,\n        data: extractTableData()\n    };\n    const json = JSON.stringify(projectData, null, 2);\n    const blob = new Blob([\n        json\n    ], {\n        type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${rabTitle.textContent.replace(/\\s/g, '_')}_RAB.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    alert('Data RAB berhasil diexport sebagai JSON.');\n}\nfunction importData(jsonContent) {\n    try {\n        const projectData = JSON.parse(jsonContent);\n        rabTitle.textContent = projectData.title || 'RAB Maker Interaktif';\n        renderTable(projectData.data);\n        alert('Data RAB berhasil diimport.');\n    } catch (error) {\n        alert('Gagal mengimport data. Pastikan file JSON valid.');\n        console.error('Import Error:', error);\n    }\n}\n// Global file input element\nconst importFileInput = document.createElement('input');\nimportFileInput.type = 'file';\nimportFileInput.accept = '.json';\nimportFileInput.style.display = 'none'; // Keep it hidden\n// Function to handle file input change\nconst handleImportFileChange = (e)=>{\n    const file = e.target.files[0];\n    if (file) {\n        const reader = new FileReader();\n        reader.onload = (event)=>importData(event.target.result);\n        reader.readAsText(file);\n    }\n};\n// Function to trigger file input click\nfunction triggerImportFileInput() {\n    importFileInput.click();\n}\n// --- INITALIZATION / DOMContentLoaded ---\ndocument.addEventListener('DOMContentLoaded', function() {\n    const themeToggle = document.getElementById('theme-toggle');\n    // --- FUNGSI TEMA ---\n    const applyTheme = (theme)=>{\n        const moonIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-moon\"><path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path></svg>';\n        const sunIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-sun\"><circle cx=\"12\" cy=\"12\" r=\"5\"></circle><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line><line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line><line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line><line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line><line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line></svg>';\n        if (theme === 'dark') {\n            document.body.classList.add('dark-mode');\n            themeToggle.innerHTML = sunIcon;\n        } else {\n            document.body.classList.remove('dark-mode');\n            themeToggle.innerHTML = moonIcon;\n        }\n    };\n    const toggleTheme = ()=>{\n        const currentTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';\n        localStorage.setItem('theme', currentTheme);\n        applyTheme(currentTheme);\n    };\n    // Cek tema tersimpan saat load\n    const savedTheme = localStorage.getItem('theme') || 'dark';\n    applyTheme(savedTheme);\n    // Append the hidden file input to the body once\n    document.body.appendChild(importFileInput);\n    importFileInput.addEventListener('change', handleImportFileChange);\n    // --- EVENT LISTENERS ---\n    themeToggle.addEventListener('click', toggleTheme);\n    addRowBtn.addEventListener('click', addNewRow);\n    undoBtn.addEventListener('click', undo);\n    redoBtn.addEventListener('click', redo);\n    // Language selector event listeners\n    const languageId = document.getElementById('language-id');\n    const languageEn = document.getElementById('language-en');\n    function updateLanguageSelector() {\n        if (currentLanguage === 'id') {\n            languageId.classList.add('active');\n            languageEn.classList.remove('active');\n        } else {\n            languageEn.classList.add('active');\n            languageId.classList.remove('active');\n        }\n    }\n    languageId.addEventListener('click', ()=>{\n        currentLanguage = 'id';\n        applyTranslations();\n        updateLanguageSelector();\n    });\n    languageEn.addEventListener('click', ()=>{\n        currentLanguage = 'en';\n        applyTranslations();\n        updateLanguageSelector();\n    });\n    // Dropdown toggle\n    actionDropdownToggle.addEventListener('click', (e)=>{\n        e.stopPropagation(); // Prevent immediate closing\n        actionDropdownMenu.classList.toggle('show');\n    });\n    // Close dropdown when clicking outside\n    document.addEventListener('click', (e)=>{\n        if (!actionDropdownMenu.contains(e.target) && !actionDropdownToggle.contains(e.target)) actionDropdownMenu.classList.remove('show');\n    });\n    // Re-attach listeners for dropdown items\n    importJsonBtn.addEventListener('click', triggerImportFileInput);\n    exportJsonBtn.addEventListener('click', exportData);\n    printPdfBtn.addEventListener('click', ()=>window.print());\n    // Listener untuk shortcut keyboard\n    document.addEventListener('keydown', (e)=>{\n        const isEditing = document.activeElement.isContentEditable || document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA';\n        if (e.ctrlKey && e.key === 'z') {\n            e.preventDefault();\n            undo();\n        }\n        if (e.ctrlKey && e.key === 'y') {\n            e.preventDefault();\n            redo();\n        }\n    });\n    // Detect user language and apply translations\n    detectUserLanguage().then(()=>{\n        applyTranslations();\n        updateLanguageSelector();\n    });\n    renderTable(initialData, true); // Save initial state\n    updateUndoRedoButtons();\n});\n\n//# sourceMappingURL=RAB-maker.5b0186a1.js.map\n","// --- LANGUAGE MANAGEMENT ---\r\nlet currentLanguage = 'id'; // Default to Indonesian\r\n\r\n/**\r\n * Apply translations to elements with data-translate attributes\r\n */\r\nfunction applyTranslations() {\r\n    const elements = document.querySelectorAll('[data-translate]');\r\n    elements.forEach(element => {\r\n        const key = element.getAttribute('data-translate');\r\n        if (translations[currentLanguage] && translations[currentLanguage][key]) {\r\n            element.textContent = translations[currentLanguage][key];\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Detect user's country and set language accordingly\r\n */\r\nasync function detectUserLanguage() {\r\n    try {\r\n        const response = await fetch('https://ipapi.co/json/');\r\n        const data = await response.json();\r\n        if (data.country === 'ID') {\r\n            currentLanguage = 'id';\r\n        } else {\r\n            currentLanguage = 'en';\r\n        }\r\n    } catch (error) {\r\n        console.warn('Failed to detect user location, defaulting to Indonesian:', error);\r\n        currentLanguage = 'id'; // Fallback to Indonesian\r\n    }\r\n}\r\n\r\n// --- DATA AWAL ---\r\nconst initialData = [\r\n    { modul: 'A', kategori: 'ELEKTRONIK', komponen: 'Mikrokontroler (e.g., Arduino Uno)', jumlah: 1, satuan: 'unit', harga: 150000, keterangan: 'Otak utama proyek', isHeader: false, image: '' },\r\n    { modul: 'A', kategori: 'ELEKTRONIK', komponen: 'Sensor Jarak (e.g., HC-SR04)', jumlah: 2, satuan: 'unit', harga: 25000, keterangan: 'Untuk deteksi halangan', isHeader: false, image: '' },\r\n    { modul: 'B', kategori: 'MEKANIK', komponen: 'Roda Karet', jumlah: 4, satuan: 'pcs', harga: 15000, keterangan: 'Ukuran 65mm', isHeader: false, image: '' },\r\n    { modul: 'B', kategori: 'MEKANIK', komponen: 'Motor DC + Gearbox', jumlah: 4, satuan: 'unit', harga: 45000, keterangan: 'Penggerak roda', isHeader: false, image: '' },\r\n    { modul: 'C', kategori: 'DAYA', komponen: 'Baterai Li-Ion 18650', jumlah: 2, satuan: 'unit', harga: 50000, keterangan: 'Kapasitas 3000mAh', isHeader: false, image: '' },\r\n    { modul: 'C', kategori: 'DAYA', komponen: 'Modul Charger TP4056', jumlah: 1, satuan: 'unit', harga: 10000, keterangan: 'Untuk mengisi daya baterai', isHeader: false, image: '' },\r\n];\r\n\r\n// --- REFERENSI DOM ---\r\nconst rabTbody = document.getElementById('rab-tbody');\r\nconst rabTitle = document.getElementById('rab-title');\r\nconst addRowBtn = document.getElementById('add-row-btn');\r\nconst undoBtn = document.getElementById('undo-btn');\r\nconst redoBtn = document.getElementById('redo-btn');\r\n\r\n// Dropdown elements\r\nconst actionDropdownToggle = document.getElementById('action-dropdown-toggle');\r\nconst actionDropdownMenu = document.getElementById('action-dropdown-menu');\r\nconst importJsonBtn = document.getElementById('import-json-btn');\r\nconst exportJsonBtn = document.getElementById('export-json-btn');\r\nconst printPdfBtn = document.getElementById('print-pdf-btn');\r\n\r\n// --- RIWAYAT UNDO/REDO ---\r\nlet history = [];\r\nlet historyIndex = -1;\r\n\r\n\r\n// --- UTILITY FUNCTIONS ---\r\nfunction formatRupiah(angka) {\r\n    return new Intl.NumberFormat('id-ID', { maximumFractionDigits: 0 }).format(angka);\r\n}\r\n\r\n/**\r\n * Membuat elemen baris (Row) tabel\r\n */\r\nfunction createRow(data) {\r\n    if (data.isHeader) {\r\n        const headerRow = document.createElement('tr');\r\n        headerRow.className = 'modul-header';\r\n        \r\n        // Header Modul dibuat editable, colspan 9 untuk mencakup kolom Gambar dan Aksi\r\n        headerRow.innerHTML = `\r\n            <td colspan=\"10\" contenteditable=\"true\">${data.modul} - ${data.kategori}</td>\r\n            <td class=\"action-column\">\r\n                <button class=\"add-component-header-btn\" data-modul=\"${data.modul}\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\r\n                </button>\r\n            </td>\r\n        `;\r\n        // Attach event listener for the new button\r\n        const addComponentButton = headerRow.querySelector('.add-component-header-btn');\r\n        if (addComponentButton) {\r\n            addComponentButton.addEventListener('click', (e) => {\r\n                const module = e.currentTarget.dataset.modul;\r\n                addComponentToModule(module);\r\n            });\r\n        }\r\n        \r\n        return headerRow;\r\n    }\r\n\r\n    const row = document.createElement('tr');\r\n    row.className = `modul-${data.modul.toLowerCase()}`;\r\n    row.dataset.modul = data.modul;\r\n\r\n    // Memasukkan input dan teks print-only, serta class rata tengah\r\n    row.innerHTML = `\r\n        <td data-label=\"Modul\" class=\"center-print editable-cell\" contenteditable=\"true\">${data.modul}</td>\r\n        <td data-label=\"Kategori\" class=\"editable-cell\" contenteditable=\"true\">${data.kategori}</td>\r\n        <td data-label=\"Komponen\" class=\"editable-cell\" contenteditable=\"true\">${data.komponen}</td>\r\n        \r\n        <td data-label=\"Jumlah\" class=\"center-print\">\r\n            <input type=\"number\" min=\"0\" value=\"${data.jumlah}\" class=\"qty-input\">\r\n            <span class=\"print-text\">${data.jumlah}</span>\r\n        </td>\r\n        \r\n        <td data-label=\"Satuan\" class=\"editable-cell\" contenteditable=\"true\">${data.satuan}</td>\r\n        \r\n        <td data-label=\"Harga Satuan (IDR)\">\r\n            <input type=\"number\" min=\"0\" value=\"${data.harga}\" class=\"price-input\">\r\n            <span class=\"print-text\">${formatRupiah(data.harga)}</span>\r\n        </td>\r\n        \r\n        <td data-label=\"Subtotal (IDR)\" class=\"currency subtotal\"></td>\r\n        <td data-label=\"Keterangan\" class=\"note editable-cell\" contenteditable=\"true\">${data.keterangan}</td>\r\n        \r\n        <td data-label=\"Gambar\" class=\"image-column\">\r\n            <div class=\"image-preview-container\">\r\n                <img src=\"${data.image || 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='}\" class=\"image-preview\" alt=\"Gambar Komponen\" ${data.image ? '' : 'style=\"display: none;\"'}>\r\n                <input type=\"file\" accept=\"image/*\" class=\"image-input\" style=\"display: none;\">\r\n                <div class=\"image-controls\">\r\n                    <button class=\"btn-image-upload\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-image\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle><polyline points=\"21 15 16 10 5 21\"></polyline></svg>\r\n                    </button>\r\n                    <button class=\"btn-image-clear\" ${data.image ? '' : 'style=\"display: none;\"'}>\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </td>\r\n        \r\n        <td data-label=\"Aksi\" class=\"action-column\"><button class=\"delete-btn\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-trash-2\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line></svg>\r\n        </button></td> \r\n    `;\r\n\r\n    const qtyInput = row.querySelector('.qty-input');\r\n    const priceInput = row.querySelector('.price-input');\r\n    const deleteButton = row.querySelector('.delete-btn');\r\n    const editableCells = row.querySelectorAll('.editable-cell');\r\n    \r\n    // Image handling elements\r\n    const imageInput = row.querySelector('.image-input');\r\n    const imagePreview = row.querySelector('.image-preview');\r\n    const btnImageUpload = row.querySelector('.btn-image-upload');\r\n    const btnImageClear = row.querySelector('.btn-image-clear');\r\n\r\n    // Ambil elemen print-text untuk diupdate saat input berubah\r\n    const qtyPrintText = row.querySelector('.print-text:first-child');\r\n    const pricePrintText = row.querySelector('.print-text:last-child');\r\n\r\n\r\n    qtyInput.addEventListener('input', () => {\r\n        calculateTotal();\r\n        qtyPrintText.textContent = qtyInput.value;\r\n    });\r\n    priceInput.addEventListener('input', () => {\r\n        calculateTotal();\r\n        pricePrintText.textContent = formatRupiah(priceInput.value);\r\n    });\r\n    \r\n    // Simpan state saat pengguna selesai mengedit (on blur)\r\n    qtyInput.addEventListener('blur', () => saveState());\r\n    priceInput.addEventListener('blur', () => saveState());\r\n\r\n    deleteButton.addEventListener('click', (e) => deleteRow(e.target));\r\n\r\n    editableCells.forEach(cell => {\r\n        cell.addEventListener('input', calculateTotal);\r\n        // Simpan state saat pengguna selesai mengedit sel\r\n        cell.addEventListener('blur', () => saveState());\r\n    });\r\n\r\n    // --- Image Handling Event Listeners ---\r\n    btnImageUpload.addEventListener('click', () => imageInput.click());\r\n\r\n    imageInput.addEventListener('change', (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                imagePreview.src = event.target.result;\r\n                imagePreview.style.display = 'block';\r\n                btnImageClear.style.display = 'inline-block';\r\n                // Update the data model associated with this row\r\n                const currentData = extractTableData();\r\n                const rowIndex = Array.from(rabTbody.children).indexOf(row);\r\n                // Adjust rowIndex for header rows if present\r\n                let actualRowIndex = -1;\r\n                let dataIndex = 0;\r\n                for(let i=0; i<rabTbody.children.length; i++) {\r\n                    if (rabTbody.children[i].classList.contains('modul-header')) continue;\r\n                    if (rabTbody.children[i] === row) {\r\n                        actualRowIndex = dataIndex;\r\n                        break;\r\n                    }\r\n                    dataIndex++;\r\n                }\r\n\r\n                if (actualRowIndex !== -1 && currentData[actualRowIndex]) {\r\n                    currentData[actualRowIndex].image = event.target.result;\r\n                    saveState(); // Save state after image update\r\n                }\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    });\r\n\r\n    btnImageClear.addEventListener('click', () => {\r\n        imagePreview.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='; // Transparent GIF\r\n        imagePreview.style.display = 'none';\r\n        btnImageClear.style.display = 'none';\r\n        // Update the data model associated with this row\r\n        const currentData = extractTableData();\r\n        const rowIndex = Array.from(rabTbody.children).indexOf(row);\r\n        let actualRowIndex = -1;\r\n        let dataIndex = 0;\r\n                for(let i=0; i<rabTbody.children.length; i++) {\r\n                    if (rabTbody.children[i].classList.contains('modul-header')) continue;\r\n                    if (rabTbody.children[i] === row) {\r\n                        actualRowIndex = dataIndex;\r\n                        break;\r\n                    }\r\n                    dataIndex++;\r\n                }\r\n        if (actualRowIndex !== -1 && currentData[actualRowIndex]) {\r\n            currentData[actualRowIndex].image = '';\r\n            saveState(); // Save state after image clear\r\n        }\r\n    });\r\n\r\n\r\n    return row;\r\n}\r\n\r\n/**\r\n * Memasukkan baris Total Keseluruhan ke akhir tbody.\r\n */\r\nfunction insertTotalRow() {\r\n    // Pastikan elemen totalRow sebelumnya tidak ada (untuk menghindari duplikasi saat render ulang)\r\n    let existingTotalRow = document.querySelector('.total-row-dynamic');\r\n    if (existingTotalRow) {\r\n        existingTotalRow.remove();\r\n    }\r\n    \r\n    const totalRow = document.createElement('tr');\r\n    totalRow.className = 'total-row total-row-dynamic'; // Tambahkan class dynamic untuk identifikasi\r\n    totalRow.innerHTML = `\r\n        <td colspan=\"6\" style=\"text-align: center;\">TOTAL KESELURUHAN (ESTIMASI)</td>\r\n        <td class=\"currency\" id=\"total-harga\">0</td>\r\n        <td colspan=\"3\" class=\"action-column\"></td> \r\n        `;\r\n    rabTbody.appendChild(totalRow);\r\n}\r\n\r\n// --- FUNGSI UNDO/REDO ---\r\n\r\n/**\r\n * Memperbarui status tombol Urungkan dan Ulangi (aktif/nonaktif).\r\n */\r\nfunction updateUndoRedoButtons() {\r\n    undoBtn.disabled = historyIndex <= 0;\r\n    redoBtn.disabled = historyIndex >= history.length - 1;\r\n}\r\n\r\n/**\r\n * Menyimpan snapshot dari data tabel saat ini ke dalam riwayat.\r\n * Ini akan menghapus riwayat \"redo\" jika ada perubahan baru.\r\n */\r\nfunction saveState() {\r\n    // Ambil data saat ini\r\n    const currentState = extractTableData();\r\n    \r\n    // Hapus riwayat masa depan jika kita membuat perubahan baru setelah meng-undo\r\n    if (historyIndex < history.length - 1) {\r\n        history = history.slice(0, historyIndex + 1);\r\n    }\r\n    \r\n    // Tambahkan state baru ke riwayat\r\n    history.push(currentState);\r\n    historyIndex++;\r\n    \r\n    // Perbarui status tombol\r\n    updateUndoRedoButtons();\r\n}\r\n\r\n/**\r\n * Mengembalikan state tabel ke posisi sebelumnya dalam riwayat.\r\n */\r\nfunction undo() {\r\n    if (historyIndex > 0) {\r\n        historyIndex--;\r\n        // Render ulang tabel dengan state dari riwayat tanpa menyimpan state baru\r\n        renderTable(history[historyIndex], false);\r\n        updateUndoRedoButtons();\r\n    }\r\n}\r\n\r\n/**\r\n * Mengembalikan state tabel ke posisi berikutnya dalam riwayat.\r\n */\r\nfunction redo() {\r\n    if (historyIndex < history.length - 1) {\r\n        historyIndex++;\r\n        // Render ulang tabel dengan state dari riwayat tanpa menyimpan state baru\r\n        renderTable(history[historyIndex], false);\r\n        updateUndoRedoButtons();\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Merender data ke tabel dengan header modul.\r\n * @param {Array} data - Data yang akan dirender.\r\n * @param {boolean} shouldSaveState - Apakah akan menyimpan state ini ke riwayat. Default true.\r\n */\r\nfunction renderTable(data, shouldSaveState = true) {\r\n    rabTbody.innerHTML = '';\r\n    let currentModul = null;\r\n    data.sort((a, b) => a.modul.localeCompare(b.modul));\r\n\r\n    data.forEach(item => {\r\n        const kategori = item.kategori;\r\n\r\n        if (item.modul !== currentModul) {\r\n            const headerData = { modul: item.modul, kategori: kategori, isHeader: true };\r\n            rabTbody.appendChild(createRow(headerData));\r\n            currentModul = item.modul;\r\n        }\r\n        rabTbody.appendChild(createRow(item));\r\n    });\r\n\r\n    insertTotalRow();\r\n    calculateTotal();\r\n    \r\n    // Simpan state setelah rendering jika diperlukan\r\n    if (shouldSaveState) {\r\n        saveState();\r\n    }\r\n}\r\n\r\n/**\r\n * Menghitung dan memperbarui total biaya RAB.\r\n */\r\nfunction calculateTotal(shouldSaveState = false) {\r\n    let total = 0;\r\n    const rows = rabTbody.querySelectorAll('tr:not(.modul-header):not(.total-row-dynamic)');\r\n\r\n    rows.forEach(row => {\r\n        const qtyInput = row.querySelector('.qty-input');\r\n        const priceInput = row.querySelector('.price-input');\r\n        const subtotalElement = row.querySelector('.subtotal');\r\n        \r\n        const qty = parseInt(qtyInput ? qtyInput.value : 0) || 0;\r\n        const price = parseInt(priceInput ? priceInput.value : 0) || 0;\r\n        const subtotal = qty * price;\r\n\r\n        if (subtotalElement) {\r\n            subtotalElement.textContent = formatRupiah(subtotal);\r\n            total += subtotal;\r\n        }\r\n    });\r\n    \r\n    const totalHargaElement = document.getElementById('total-harga');\r\n    const totalEstimasiElement = document.getElementById('total-estimasi');\r\n\r\n    if (totalHargaElement) {\r\n        totalHargaElement.textContent = formatRupiah(total);\r\n    }\r\n    if (totalEstimasiElement) {\r\n        totalEstimasiElement.textContent = 'Rp ' + formatRupiah(total);\r\n    }\r\n\r\n    // Hanya simpan state jika diminta secara eksplisit\r\n    if (shouldSaveState) {\r\n        saveState();\r\n    }\r\n}\r\n\r\n/**\r\n * Menambahkan komponen baru di bawah header modul tertentu.\r\n */\r\nfunction addComponentToModule(module) {\r\n    const newComponent = {\r\n        modul: module,\r\n        kategori: 'KATEGORI BARU',\r\n        komponen: 'Komponen Baru',\r\n        jumlah: 1,\r\n        satuan: 'pcs',\r\n        harga: 10000,\r\n        keterangan: 'Masukkan keterangan di sini',\r\n        isHeader: false,\r\n        image: '' // Tambah properti gambar\r\n    };\r\n\r\n    let currentData = extractTableData();\r\n    // Cari indeks baris terakhir dari modul yang sama\r\n    let insertIndex = currentData.length; // Default: tambahkan di akhir\r\n\r\n    // Find the last item of the given module to insert after it\r\n    for (let i = currentData.length - 1; i >= 0; i--) {\r\n        if (currentData[i].modul === module) {\r\n            insertIndex = i + 1;\r\n            break;\r\n        }\r\n    }\r\n\r\n    currentData.splice(insertIndex, 0, newComponent);\r\n    renderTable(currentData);\r\n}\r\n\r\n/**\r\n * Menambahkan baris komponen baru ke tabel.\r\n */\r\nfunction addNewRow() {\r\n    const newComponent = {\r\n        modul: 'E', \r\n        kategori: 'KOMPONEN LAIN',\r\n        komponen: 'Komponen Baru',\r\n        jumlah: 1,\r\n        satuan: 'pcs',\r\n        harga: 10000,\r\n        keterangan: 'Masukkan keterangan di sini',\r\n        isHeader: false,\r\n        image: '' // Tambah properti gambar\r\n    };\r\n    \r\n    const currentData = extractTableData();\r\n    currentData.push(newComponent);\r\n    renderTable(currentData);\r\n}\r\n\r\n/**\r\n * Menghapus baris komponen dari tabel.\r\n */\r\nfunction deleteRow(button) {\r\n    const row = button.closest('tr');\r\n    const componentName = row.children[2].textContent; \r\n\r\n    if (confirm(`Yakin ingin menghapus komponen: ${componentName}?`)) {\r\n        row.remove();\r\n        calculateTotal();\r\n        saveState(); // Simpan state setelah menghapus\r\n    }\r\n}\r\n\r\n\r\n// --- EXPORT/IMPORT FUNCTIONALITY ---\r\nfunction extractTableData() {\r\n    const data = [];\r\n    // Seleksi hanya baris komponen, abaikan header dan baris total\r\n    const rows = rabTbody.querySelectorAll('tr:not(.modul-header):not(.total-row-dynamic)'); \r\n\r\n    rows.forEach(row => {\r\n        const imagePreview = row.querySelector('.image-preview');\r\n        const imageData = imagePreview && imagePreview.src !== 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=' ? imagePreview.src : '';\r\n\r\n        const item = {\r\n            modul: row.children[0].textContent.trim(),\r\n            kategori: row.children[1].textContent.trim(),\r\n            komponen: row.children[2].textContent.trim(), \r\n            jumlah: parseInt(row.querySelector('.qty-input').value) || 0,\r\n            satuan: row.children[4].textContent.trim(),\r\n            harga: parseInt(row.querySelector('.price-input').value) || 0,\r\n            keterangan: row.children[7].textContent.trim(),\r\n            image: imageData, // Tambah properti gambar\r\n            isHeader: false\r\n        };\r\n        data.push(item);\r\n    });\r\n    return data;\r\n}\r\n\r\nfunction exportData() {\r\n    const projectData = {\r\n        title: rabTitle.textContent,\r\n        data: extractTableData()\r\n    };\r\n    \r\n    const json = JSON.stringify(projectData, null, 2);\r\n    const blob = new Blob([json], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    \r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = `${rabTitle.textContent.replace(/\\s/g, '_')}_RAB.json`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    alert('Data RAB berhasil diexport sebagai JSON.');\r\n}\r\n\r\nfunction importData(jsonContent) {\r\n    try {\r\n        const projectData = JSON.parse(jsonContent);\r\n        rabTitle.textContent = projectData.title || 'RAB Maker Interaktif';\r\n        renderTable(projectData.data);\r\n        alert('Data RAB berhasil diimport.');\r\n    } catch (error) {\r\n        alert('Gagal mengimport data. Pastikan file JSON valid.');\r\n        console.error('Import Error:', error);\r\n    }\r\n}\r\n\r\n// Global file input element\r\nconst importFileInput = document.createElement('input');\r\nimportFileInput.type = 'file';\r\nimportFileInput.accept = '.json';\r\nimportFileInput.style.display = 'none'; // Keep it hidden\r\n\r\n// Function to handle file input change\r\nconst handleImportFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => importData(event.target.result);\r\n        reader.readAsText(file);\r\n    }\r\n};\r\n\r\n// Function to trigger file input click\r\nfunction triggerImportFileInput() {\r\n    importFileInput.click();\r\n}\r\n\r\n\r\n// --- INITALIZATION / DOMContentLoaded ---\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const themeToggle = document.getElementById('theme-toggle');\r\n\r\n    // --- FUNGSI TEMA ---\r\n    const applyTheme = (theme) => {\r\n        const moonIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-moon\"><path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path></svg>';\r\n        const sunIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-sun\"><circle cx=\"12\" cy=\"12\" r=\"5\"></circle><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line><line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line><line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line><line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line><line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line></svg>';\r\n\r\n        if (theme === 'dark') {\r\n            document.body.classList.add('dark-mode');\r\n            themeToggle.innerHTML = sunIcon;\r\n        } else {\r\n            document.body.classList.remove('dark-mode');\r\n            themeToggle.innerHTML = moonIcon;\r\n        }\r\n    };\r\n\r\n    const toggleTheme = () => {\r\n        const currentTheme = document.body.classList.contains('dark-mode') ? 'light' : 'dark';\r\n        localStorage.setItem('theme', currentTheme);\r\n        applyTheme(currentTheme);\r\n    };\r\n\r\n    // Cek tema tersimpan saat load\r\n    const savedTheme = localStorage.getItem('theme') || 'dark';\r\n    applyTheme(savedTheme);\r\n\r\n    // Append the hidden file input to the body once\r\n    document.body.appendChild(importFileInput);\r\n    importFileInput.addEventListener('change', handleImportFileChange);\r\n\r\n    // --- EVENT LISTENERS ---\r\n    themeToggle.addEventListener('click', toggleTheme);\r\n    addRowBtn.addEventListener('click', addNewRow);\r\n    undoBtn.addEventListener('click', undo);\r\n    redoBtn.addEventListener('click', redo);\r\n\r\n    // Language selector event listeners\r\n    const languageId = document.getElementById('language-id');\r\n    const languageEn = document.getElementById('language-en');\r\n\r\n    function updateLanguageSelector() {\r\n        if (currentLanguage === 'id') {\r\n            languageId.classList.add('active');\r\n            languageEn.classList.remove('active');\r\n        } else {\r\n            languageEn.classList.add('active');\r\n            languageId.classList.remove('active');\r\n        }\r\n    }\r\n\r\n    languageId.addEventListener('click', () => {\r\n        currentLanguage = 'id';\r\n        applyTranslations();\r\n        updateLanguageSelector();\r\n    });\r\n\r\n    languageEn.addEventListener('click', () => {\r\n        currentLanguage = 'en';\r\n        applyTranslations();\r\n        updateLanguageSelector();\r\n    });\r\n\r\n    // Dropdown toggle\r\n    actionDropdownToggle.addEventListener('click', (e) => {\r\n        e.stopPropagation(); // Prevent immediate closing\r\n        actionDropdownMenu.classList.toggle('show');\r\n    });\r\n\r\n    // Close dropdown when clicking outside\r\n    document.addEventListener('click', (e) => {\r\n        if (!actionDropdownMenu.contains(e.target) && !actionDropdownToggle.contains(e.target)) {\r\n            actionDropdownMenu.classList.remove('show');\r\n        }\r\n    });\r\n\r\n    // Re-attach listeners for dropdown items\r\n    importJsonBtn.addEventListener('click', triggerImportFileInput);\r\n    exportJsonBtn.addEventListener('click', exportData);\r\n    printPdfBtn.addEventListener('click', () => window.print());\r\n\r\n    // Listener untuk shortcut keyboard\r\n    document.addEventListener('keydown', (e) => {\r\n        const isEditing = document.activeElement.isContentEditable || \r\n                          document.activeElement.tagName === 'INPUT' || \r\n                          document.activeElement.tagName === 'TEXTAREA';\r\n\r\n        if (e.ctrlKey && e.key === 'z') {\r\n            e.preventDefault();\r\n            undo();\r\n        }\r\n        if (e.ctrlKey && e.key === 'y') {\r\n            e.preventDefault();\r\n            redo();\r\n        }\r\n    });\r\n\r\n    // Detect user language and apply translations\r\n    detectUserLanguage().then(() => {\r\n        applyTranslations();\r\n        updateLanguageSelector();\r\n    });\r\n\r\n    renderTable(initialData, true); // Save initial state\r\n    updateUndoRedoButtons();\r\n});\r\n"],"names":["currentLanguage","applyTranslations","elements","document","querySelectorAll","forEach","element","key","getAttribute","translations","textContent","detectUserLanguage","response","fetch","data","json","country","error","console","warn","initialData","modul","kategori","komponen","jumlah","satuan","harga","keterangan","isHeader","image","rabTbody","getElementById","rabTitle","addRowBtn","undoBtn","redoBtn","actionDropdownToggle","actionDropdownMenu","importJsonBtn","exportJsonBtn","printPdfBtn","history","historyIndex","formatRupiah","angka","Intl","NumberFormat","maximumFractionDigits","format","createRow","headerRow","createElement","className","innerHTML","addComponentButton","querySelector","addEventListener","e","addComponentToModule","currentTarget","dataset","row","toLowerCase","qtyInput","priceInput","deleteButton","editableCells","imageInput","imagePreview","btnImageUpload","btnImageClear","qtyPrintText","pricePrintText","calculateTotal","value","saveState","deleteRow","target","cell","click","file","files","reader","FileReader","onload","event","src","result","style","display","currentData","extractTableData","Array","from","children","indexOf","actualRowIndex","dataIndex","i","length","classList","contains","readAsDataURL","insertTotalRow","existingTotalRow","remove","totalRow","appendChild","updateUndoRedoButtons","disabled","currentState","slice","push","undo","renderTable","redo","shouldSaveState","currentModul","sort","a","b","localeCompare","item","headerData","total","rows","subtotalElement","subtotal","qty","parseInt","totalHargaElement","totalEstimasiElement","module","insertIndex","splice","addNewRow","button","closest","componentName","confirm","imageData","trim","exportData","blob","Blob","JSON","stringify","title","type","url","URL","createObjectURL","href","download","replace","body","removeChild","revokeObjectURL","alert","importData","jsonContent","projectData","parse","importFileInput","accept","handleImportFileChange","readAsText","triggerImportFileInput","themeToggle","applyTheme","theme","add","localStorage","getItem","currentTheme","setItem","languageId","languageEn","updateLanguageSelector","stopPropagation","toggle","window","print","activeElement","isContentEditable","tagName","ctrlKey","preventDefault","then"],"version":3,"file":"RAB-maker.5b0186a1.js.map"}